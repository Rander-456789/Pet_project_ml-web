<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Кредитная заявка</title>
</head>
<body>
  <h2>Проверка одобрения кредита</h2>

  <label>Возраст:</label>
  <input id="age" type="number"><br><br>

  <label>Доход:</label>
  <input id="income" type="number"><br><br>

  <label><input id="education" type="checkbox"> Есть высшее образование</label><br>
  <label><input id="work" type="checkbox"> Есть стабильная работа</label><br>
  <label><input id="car" type="checkbox"> Есть автомобиль</label><br><br>

  <button onclick="sendForm()">Отправить</button>

  <p id="result"></p>

  <script>
    async function sendForm() {
      // 1. Получаем значения из полей
      const age = parseInt(document.getElementById("age").value);
      const income = parseFloat(document.getElementById("income").value);
      const education = document.getElementById("education").checked;
      const work = document.getElementById("work").checked;
      const car = document.getElementById("car").checked;

      // 3. Отправляем запрос на backend
      const response = await fetch("http://127.0.0.1:8000/score", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
          age: age,
          income: income,
          education: education,
          work: work,
          car: car
        })
      });

      // 4. Получаем ответ от backend-а
      const data = await response.json();

      // 5. Показываем результат пользователю
      if (data.approved) {
        document.getElementById("result").innerText = "✅ Заявка одобрена!";
      } else {
        document.getElementById("result").innerText = "❌ Заявка отклонена.";
      }
    }
  </script>
</body>
</html>
